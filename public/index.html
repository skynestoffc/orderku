<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OrderKuota Proxy API</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Plus Jakarta Sans', sans-serif; }
    code, pre { font-family: 'JetBrains Mono', monospace; }
    .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
  </style>
</head>
<body class="gradient-bg min-h-screen text-gray-100">
  <div class="max-w-4xl mx-auto px-6 py-12">
    <header class="mb-12">
      <h1 class="text-4xl font-bold mb-2">OrderKuota Proxy API</h1>
      <p class="text-gray-400">Payment Gateway Proxy for OrderKuota QRIS</p>
      <div class="mt-4 flex gap-2">
        <span class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm">v1.0.0</span>
        <span class="px-3 py-1 bg-blue-500/20 text-blue-400 rounded-full text-sm">REST API</span>
      </div>
    </header>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4 text-white">Base URL</h2>
      <code class="block bg-slate-800 p-4 rounded-lg text-emerald-400">https://orderkuota-proxy.vercel.app</code>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4 text-white">Response Format</h2>
      <p class="text-gray-400 mb-4">All endpoints return JSON with consistent structure:</p>
      <pre class="bg-slate-800 p-4 rounded-lg overflow-x-auto text-sm"><code class="text-gray-300">{
  "success": true,
  "data": { ... }
}

{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "Human readable message"
  }
}</code></pre>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-white">Endpoints</h2>

      <div class="space-y-8">
        <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs font-medium">POST</span>
            <code class="text-white">/api/auth/otp</code>
          </div>
          <p class="text-gray-400 mb-4">Request OTP for authentication</p>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Request Body</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "username": "your_username",
  "password": "your_password"
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm"><code class="text-gray-300">{
  "success": true,
  "data": {
    "results": {
      "otp_value": "u***@gmail.com"
    }
  }
}</code></pre>
        </div>

        <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs font-medium">POST</span>
            <code class="text-white">/api/auth/token</code>
          </div>
          <p class="text-gray-400 mb-4">Get authentication token using OTP</p>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Request Body</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "username": "your_username",
  "otp": "123456"
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm"><code class="text-gray-300">{
  "success": true,
  "data": {
    "results": {
      "token": "abc123:xyz789",
      "id": "12345",
      "name": "User Name",
      "balance": "100000"
    }
  }
}</code></pre>
        </div>

        <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs font-medium">POST</span>
            <code class="text-white">/api/qris/generate</code>
          </div>
          <p class="text-gray-400 mb-4">Generate dynamic QRIS from static QRIS with unique amount</p>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Request Body</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "username": "your_username",
  "token": "abc123:xyz789",
  "amount": 50000,
  "qris_static": "00020101021126670016COM.NOBUBANK.WWW..."
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm"><code class="text-gray-300">{
  "success": true,
  "data": {
    "transaction_id": "550e8400-e29b-41d4-a716-446655440000",
    "base_amount": 50000,
    "unique_suffix": 123,
    "final_amount": 50123,
    "qris_string": "00020101021226...",
    "expires_at": 1734567890
  }
}</code></pre>
          <div class="mt-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg">
            <p class="text-blue-400 text-sm"><strong>Note:</strong> Converts static QRIS to dynamic QRIS. Amount will be added with unique suffix (1-999) to prevent collision. QRIS expires in 10 minutes.</p>
          </div>
        </div>

        <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs font-medium">POST</span>
            <code class="text-white">/api/qris/check</code>
          </div>
          <p class="text-gray-400 mb-4">Check payment status</p>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Request Body</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "username": "your_username",
  "token": "abc123:xyz789",
  "transaction_id": "550e8400-e29b-41d4-a716-446655440000"
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response (Pending)</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "success": true,
  "data": {
    "status": "pending",
    "final_amount": 50123,
    "expires_in": 540
  }
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response (Paid)</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "success": true,
  "data": {
    "status": "paid",
    "final_amount": 50123,
    "paid_at": 1734567890
  }
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response (Expired)</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm"><code class="text-gray-300">{
  "success": true,
  "data": {
    "status": "expired"
  }
}</code></pre>
        </div>

        <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs font-medium">POST</span>
            <code class="text-white">/api/account/balance</code>
          </div>
          <p class="text-gray-400 mb-4">Check account balance</p>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Request Body</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "username": "your_username",
  "token": "abc123:xyz789"
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm"><code class="text-gray-300">{
  "success": true,
  "data": {
    "balance": 100000,
    "qris_balance": 50000
  }
}</code></pre>
        </div>

        <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded text-xs font-medium">POST</span>
            <code class="text-white">/api/qris/image</code>
          </div>
          <p class="text-gray-400 mb-4">Generate QR code image from QRIS string</p>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Request Body</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm mb-4"><code class="text-gray-300">{
  "qris_string": "00020101021226...",
  "size": 300,
  "format": "png"
}</code></pre>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm"><code class="text-gray-300">{
  "success": true,
  "data": {
    "qr_image": "data:image/png;base64,iVBORw0KGgo...",
    "size": 300,
    "format": "png"
  }
}</code></pre>
          <div class="mt-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg">
            <p class="text-blue-400 text-sm"><strong>Note:</strong> Size range: 100-1000px. Format: png or jpeg. Returns base64 data URL.</p>
          </div>
        </div>

        <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-2 py-1 bg-green-500/20 text-green-400 rounded text-xs font-medium">GET</span>
            <code class="text-white">/api/health</code>
          </div>
          <p class="text-gray-400 mb-4">Health check endpoint</p>
          <h4 class="text-sm font-medium text-gray-300 mb-2">Response</h4>
          <pre class="bg-slate-900 p-3 rounded-lg text-sm"><code class="text-gray-300">{
  "success": true,
  "data": {
    "status": "ok",
    "timestamp": 1734567890
  }
}</code></pre>
        </div>
      </div>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-white">Example Usage</h2>
      
      <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700">
        <h3 class="text-lg font-medium text-white mb-4">JavaScript / Node.js</h3>
        <pre class="bg-slate-900 p-4 rounded-lg text-sm overflow-x-auto"><code class="text-gray-300">const BASE_URL = 'https://orderkuota-proxy.vercel.app';

async function generatePayment(username, token, amount, qrisStatic) {
  const res = await fetch(`${BASE_URL}/api/qris/generate`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ username, token, amount, qris_static: qrisStatic })
  });
  return res.json();
}

async function checkPayment(username, token, transactionId) {
  const res = await fetch(`${BASE_URL}/api/qris/check`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ 
      username, 
      token, 
      transaction_id: transactionId 
    })
  });
  return res.json();
}

// Usage
const QRIS_STATIC = '00020101021126670016COM.NOBUBANK.WWW...';
const payment = await generatePayment('user', 'token', 50000, QRIS_STATIC);
console.log('Pay:', payment.data.final_amount);
console.log('QRIS:', payment.data.qris_string);

// After user pays, check status
const status = await checkPayment('user', 'token', payment.data.transaction_id);
if (status.data.status === 'paid') {
  console.log('Payment received!');
}</code></pre>
      </div>

      <div class="bg-slate-800/50 rounded-xl p-6 border border-slate-700 mt-6">
        <h3 class="text-lg font-medium text-white mb-4">cURL</h3>
        <pre class="bg-slate-900 p-4 rounded-lg text-sm overflow-x-auto"><code class="text-gray-300"># Generate QRIS
curl -X POST https://orderkuota-proxy.vercel.app/api/qris/generate \
  -H "Content-Type: application/json" \
  -d '{"username":"user","token":"abc:xyz","amount":50000,"qris_static":"00020101021126670016COM.NOBUBANK.WWW..."}'

# Check Payment
curl -X POST https://orderkuota-proxy.vercel.app/api/qris/check \
  -H "Content-Type: application/json" \
  -d '{"username":"user","token":"abc:xyz","transaction_id":"uuid-here"}'</code></pre>
      </div>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-6 text-white">Error Codes</h2>
      <div class="bg-slate-800/50 rounded-xl border border-slate-700 overflow-hidden">
        <table class="w-full text-sm">
          <thead class="bg-slate-700/50">
            <tr>
              <th class="text-left p-4 text-gray-300">Code</th>
              <th class="text-left p-4 text-gray-300">Description</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-700">
            <tr><td class="p-4 text-red-400 font-mono">MISSING_PARAMS</td><td class="p-4 text-gray-400">Required parameters missing</td></tr>
            <tr><td class="p-4 text-red-400 font-mono">INVALID_AMOUNT</td><td class="p-4 text-gray-400">Amount must be positive number</td></tr>
            <tr><td class="p-4 text-red-400 font-mono">OTP_ERROR</td><td class="p-4 text-gray-400">Failed to request OTP</td></tr>
            <tr><td class="p-4 text-red-400 font-mono">TOKEN_ERROR</td><td class="p-4 text-gray-400">Failed to get token</td></tr>
            <tr><td class="p-4 text-red-400 font-mono">QRIS_ERROR</td><td class="p-4 text-gray-400">Failed to generate QRIS</td></tr>
            <tr><td class="p-4 text-red-400 font-mono">CHECK_ERROR</td><td class="p-4 text-gray-400">Failed to check payment</td></tr>
            <tr><td class="p-4 text-red-400 font-mono">BALANCE_ERROR</td><td class="p-4 text-gray-400">Failed to get balance</td></tr>
            <tr><td class="p-4 text-red-400 font-mono">IMAGE_ERROR</td><td class="p-4 text-gray-400">Failed to generate QR image</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="mb-12">
      <h2 class="text-2xl font-semibold mb-4 text-white">Tools</h2>
      <a href="/tools.html" class="inline-block px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg">
        Get Token & QRIS Static
      </a>
    </section>

    <footer class="text-center text-gray-500 text-sm pt-8 border-t border-slate-700">
      <p>OrderKuota Proxy API - Unofficial wrapper for OrderKuota QRIS</p>
    </footer>
  </div>
</body>
</html>
